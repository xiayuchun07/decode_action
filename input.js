const a0_0x4d9e49=a0_0x20c3;function a0_0x20c3(_0x4ae3f7,_0x13df44){const _0x3cd64c=a0_0x3cd6();return a0_0x20c3=function(_0x20c3cd,_0x73bf87){_0x20c3cd=_0x20c3cd-0x1a0;let _0x1b818e=_0x3cd64c[_0x20c3cd];return _0x1b818e;},a0_0x20c3(_0x4ae3f7,_0x13df44);}function a0_0x3cd6(){const _0x323e25=['userModel','gold','17574wSXyjA','find','181625uNBNvJ','ROOM_JOIN_BUSY_LIMIT','ROOM_NOT_EXIST','getRoomInfo','../../../constant/code','robotReady','userEntryRoom','getOwnerUid',']\x20union\x20create\x20bairen\x20room\x20sucess\x20','updateUnionServerScore','userScoreChangeRecordModel','notice','getHongBao','safeScore','isRobot','unionModel','../../../constant/enumeration','../../../services/redisService','activeTime','getUnionInfo','payType','../../../services/gameDataServices','bind','pendingRoom','addRoomRuleList','USER_CREATE',']\x20union\x20join\x20room\x20watch\x20isLocked\x20=\x20','totalScore','unionData\x20not\x20exist','destroyRoom','UpdatePumpWaterPattern','roomDismissed','tableColor','onDestroy','status','userLeaveRoom','userChangeSeat','39EpMpTG','UNION_OWNER_DISMISS','nickname','indexOf','getLength','findOneAndUpdate','createRoomBR','FAIL','141032pzXmuD','ownerUid','avatar','ruleName','gameFrameSinkPath','27798qnrnPa','PERMISSION_NOT_ENOUGH','_id','3325360lovcUD','unionData','toString','64wRPqLf','pumpWaterPattern','HUNDRED','info','getLogByType',']\x20create\x20room\x20end\x20and\x20join\x20room\x20=\x20[','getUserDataByUid','isManager','hasOwnProperty','330wOjQpf','21SLzPQA','updateUnionTableSort','\x20\x20ruleKeyLocked\x20=\x20','-create-join-room','2405IXSvAw','removeRoomRuleList','forbidGive','updatePartnerNoticeSwitch','12396720kREZjm','userReady','WOZHIFU','resultLotteryInfo','hasEmptyChair','updateUserData','showSingleRank','creatRoom','updateRoomRuleList','push','unLock','chairCount','NOT_ENOUGH_GOLD','roomPayType','userArr','16636BJHdhT','unionType','30TPjEnQ','joinWatch','hasStartedOneBureau','randomRedPacket','14137680tEeiiP',']\x20join\x20room\x20fail\x20and\x20delete\x20room\x20=\x20','dismissRoom','startTime','createRoom','createAndWatch','roomID','length','gameRoomDismissReason','../../../gameComponent/','catch','updateUnionNotice','CAN_NOT_CREATE_NEW_HONG_BAO','uid','updateStatus','unionBg','hongBaoUidList','opening','../../../services/logServices','createTime','unionID','-join-watch','../../../gameComponent/roomFrame','clone','logic','dailyClear','getLotteryStatus','getGameFrameByType','forbidInvite','roomRuleList','NOT_IN_UNION','updateUnionName','createNewRoomID','pomelo-scheduler','tableStyle','705530MkjfwI','updateData','error','isShouldDelete','updateAllData','\x20resCode\x20=\x20','gameType','hongBaoInfo',']\x20createAndWatch\x20=\x20','getHours','54zZqgrR','getLastActiveTime','INVALID_UERS','./unionManager','noticeSwitch','_doc','userJoinWatch','12446406LMPHgH','findOneData','updateOpeningStatus','scoreChangeType','115085XiTijB','quickJoin','emptyTable','roomCreatorType','USER_DATA_LOCKED','checkGold',']\x20union\x20create\x20room\x20begin\x20isLocked\x20=\x20','unionInfo','roomList','isDel','stack','unionName','exports','isLocked','414CtNFqQ','28863439crpqPj','curBureau','bureau','tableSort','shift','filter','canEnter','isOpening','now','UNION_CREATE','deleteUnion','updateLotteryStatus'];a0_0x3cd6=function(){return _0x323e25;};return a0_0x3cd6();}(function(_0x2def45,_0xe66a9a){const _0x1e96cc=a0_0x20c3,_0x124d0a=_0x2def45();while(!![]){try{const _0x5b82f0=parseInt(_0x1e96cc(0x240))/0x1+parseInt(_0x1e96cc(0x1cb))/0x2*(-parseInt(_0x1e96cc(0x1bc))/0x3)+-parseInt(_0x1e96cc(0x1c2))/0x4*(parseInt(_0x1e96cc(0x221))/0x5)+-parseInt(_0x1e96cc(0x1e5))/0x6*(parseInt(_0x1e96cc(0x20c))/0x7)+-parseInt(_0x1e96cc(0x1b7))/0x8*(parseInt(_0x1e96cc(0x22f))/0x9)+parseInt(_0x1e96cc(0x1d4))/0xa+parseInt(_0x1e96cc(0x230))/0xb;if(_0x5b82f0===_0xe66a9a)break;else _0x124d0a['push'](_0x124d0a['shift']());}catch(_0x5699b4){_0x124d0a['push'](_0x124d0a['shift']());}}}(a0_0x3cd6,0xcb6b0));function a0_0x1b4b(){const _0x1d4133=a0_0x20c3,_0x52ce0d=[_0x1d4133(0x227),_0x1d4133(0x1e4),_0x1d4133(0x1d0),_0x1d4133(0x1bd),_0x1d4133(0x22b),_0x1d4133(0x1f9),_0x1d4133(0x228),_0x1d4133(0x1e2),_0x1d4133(0x249),'init',_0x1d4133(0x1fd),_0x1d4133(0x1d3),_0x1d4133(0x244),_0x1d4133(0x1c8),_0x1d4133(0x1b2),'USER_CREATE','joinRoom',_0x1d4133(0x1b1),_0x1d4133(0x233),'shift','52243pbbGtD',_0x1d4133(0x1e3),_0x1d4133(0x225),'serverScore',_0x1d4133(0x20b),'moment',_0x1d4133(0x24d),_0x1d4133(0x1c5),_0x1d4133(0x246),_0x1d4133(0x211),_0x1d4133(0x1c1),_0x1d4133(0x1c4),_0x1d4133(0x1fa),'unLock','length',_0x1d4133(0x1cc),_0x1d4133(0x1ab),_0x1d4133(0x208),_0x1d4133(0x24b),'showRank','11OBrXno',_0x1d4133(0x213),'领取红包:',_0x1d4133(0x1b4),_0x1d4133(0x236),'updateData',_0x1d4133(0x206),_0x1d4133(0x220),_0x1d4133(0x1c7),'updateHongBaoSetting','isRobot',_0x1d4133(0x21b),_0x1d4133(0x217),_0x1d4133(0x200),'isGameEnd',_0x1d4133(0x1a7),_0x1d4133(0x239),_0x1d4133(0x202),_0x1d4133(0x1aa),_0x1d4133(0x23e),_0x1d4133(0x1fb),_0x1d4133(0x1e9),_0x1d4133(0x20f),_0x1d4133(0x1b3),_0x1d4133(0x1bf),_0x1d4133(0x1e7),'roomType','unionModel',_0x1d4133(0x1eb),_0x1d4133(0x1af),_0x1d4133(0x1a9),_0x1d4133(0x1ad),_0x1d4133(0x203),_0x1d4133(0x1ef),'../../../util/utils','../../../baiRenGame/',_0x1d4133(0x1d1),_0x1d4133(0x20a),_0x1d4133(0x1db),_0x1d4133(0x24a),_0x1d4133(0x1c6),_0x1d4133(0x223),_0x1d4133(0x245),'endTime',_0x1d4133(0x1f6),'pomelo-logger',_0x1d4133(0x1b5),_0x1d4133(0x1b0),_0x1d4133(0x1ca),_0x1d4133(0x209),_0x1d4133(0x1df),_0x1d4133(0x253),_0x1d4133(0x1be),'hongBaoScoreList',_0x1d4133(0x1ac),_0x1d4133(0x1ec),_0x1d4133(0x241),_0x1d4133(0x231),_0x1d4133(0x24c),_0x1d4133(0x23c),_0x1d4133(0x1ce),'chairID','count',_0x1d4133(0x1a1),_0x1d4133(0x1a0),'showUnionActive',_0x1d4133(0x219),'23865288jEgfTr',_0x1d4133(0x22c),_0x1d4133(0x243),_0x1d4133(0x1c9),_0x1d4133(0x205),_0x1d4133(0x1bb),_0x1d4133(0x224),_0x1d4133(0x212),_0x1d4133(0x1d5),_0x1d4133(0x1e0),'updateUnionInfo',_0x1d4133(0x1f1),_0x1d4133(0x1cd),'stringify','catch','now',_0x1d4133(0x22d),_0x1d4133(0x218),_0x1d4133(0x1a2),_0x1d4133(0x20e),'unionData',_0x1d4133(0x247),_0x1d4133(0x1a5),_0x1d4133(0x1ae),_0x1d4133(0x1e8),_0x1d4133(0x22e),_0x1d4133(0x1d2),_0x1d4133(0x1d9),_0x1d4133(0x204),_0x1d4133(0x215),_0x1d4133(0x23d),'roomList',_0x1d4133(0x1d6),_0x1d4133(0x21c),_0x1d4133(0x1c3),'oneUserDiamondCount','transferUnion','createAndWatch','NONE',_0x1d4133(0x1e6),_0x1d4133(0x254),'parse','../../../services/userInfoServices','format',_0x1d4133(0x1f8),_0x1d4133(0x21e),'../../../dao/userDao',_0x1d4133(0x252),'score',_0x1d4133(0x21d),_0x1d4133(0x216),_0x1d4133(0x21a),'gameRule','updateLotteryInfo','ROOM_ALREAY_LIMIT','../../../dao/commonDao','NOT_IN_UNION','createData','updateUnionTableColor',_0x1d4133(0x214),_0x1d4133(0x237),_0x1d4133(0x23a),_0x1d4133(0x1d7),_0x1d4133(0x22a),_0x1d4133(0x255),_0x1d4133(0x1ba),_0x1d4133(0x1e1),_0x1d4133(0x1b8),_0x1d4133(0x232),'getLogger','push',_0x1d4133(0x23f),_0x1d4133(0x1b6),'buildGameRoomUserInfo',_0x1d4133(0x1cf),_0x1d4133(0x235),_0x1d4133(0x242)];return a0_0x1b4b=function(){return _0x52ce0d;},a0_0x1b4b();}function a0_0x3068(_0x57a7e4,_0x12aa55){const _0x4a0a91=a0_0x1b4b();return a0_0x3068=function(_0x1c3cc3,_0x3b7adb){_0x1c3cc3=_0x1c3cc3-0xf4;let _0x7fc6f5=_0x4a0a91[_0x1c3cc3];return _0x7fc6f5;},a0_0x3068(_0x57a7e4,_0x12aa55);}const a0_0x146753=a0_0x3068;(function(_0x5b568b,_0x1b7acd){const _0xf8772e=a0_0x20c3,_0x4c5d61=a0_0x3068,_0x45b32b=_0x5b568b();while(!![]){try{const _0x49e7f5=parseInt(_0x4c5d61(0x14e))/0x1*(-parseInt(_0x4c5d61(0x11f))/0x2)+-parseInt(_0x4c5d61(0x17f))/0x3*(-parseInt(_0x4c5d61(0x14f))/0x4)+-parseInt(_0x4c5d61(0x13c))/0x5*(-parseInt(_0x4c5d61(0x175))/0x6)+parseInt(_0x4c5d61(0x15d))/0x7*(-parseInt(_0x4c5d61(0x17a))/0x8)+parseInt(_0x4c5d61(0x11e))/0x9+-parseInt(_0x4c5d61(0x177))/0xa+-parseInt(_0x4c5d61(0x162))/0xb*(-parseInt(_0x4c5d61(0x1a5))/0xc);if(_0x49e7f5===_0x1b7acd)break;else _0x45b32b[_0xf8772e(0x1dd)](_0x45b32b['shift']());}catch(_0x2f0f1a){_0x45b32b[_0xf8772e(0x1dd)](_0x45b32b[_0xf8772e(0x234)]());}}}(a0_0x1b4b,0xba595));let code=require(a0_0x146753(0x146)),scheduler=require(a0_0x146753(0x187)),RoomFrame=require(a0_0x4d9e49(0x1ff)),utils=require(a0_0x146753(0x184)),enumeration=require(a0_0x4d9e49(0x250)),commonDao=require(a0_0x146753(0x124)),userDao=require(a0_0x146753(0x11b)),unionManager=require(a0_0x146753(0x1a4)),logger=require(a0_0x146753(0x18f))[a0_0x146753(0x132)](a0_0x4d9e49(0x201)),gameConfig=require('../../../gameComponent/gameConfig'),moment=require(a0_0x146753(0x153)),redisService=require(a0_0x4d9e49(0x251)),logerService=require(a0_0x146753(0x176)),gameDataServices=require(a0_0x146753(0x12d)),userInfoServices=require(a0_0x146753(0x117));class union{constructor(_0x30c691){const _0x3334f2=a0_0x146753;this[_0x3334f2(0x144)]=_0x30c691,this[_0x3334f2(0x10c)]={},this[_0x3334f2(0x11c)]=Date['now'](),this[_0x3334f2(0x101)]=null,this[_0x3334f2(0x1a1)]={};}async[a0_0x146753(0x143)](){const _0x19f0f3=a0_0x4d9e49,_0x2f0240=a0_0x146753;if(this['unionID']!==0x1){this[_0x2f0240(0x101)]=await commonDao[_0x2f0240(0x11a)](_0x2f0240(0x17d),{'unionID':this[_0x2f0240(0x144)]});if(this[_0x2f0240(0x101)]){let _0x403019=this[_0x2f0240(0x101)][_0x2f0240(0x168)][_0x2f0240(0x138)](_0x2a75b8=>_0x2a75b8[_0x2f0240(0xf4)]>=0xc8),_0x3473fd=await userDao[_0x19f0f3(0x1c8)](this['unionData'][_0x2f0240(0x130)]),_0xb0bbfb=userInfoServices[_0x2f0240(0x136)](_0x3473fd);for(let _0x1ebf97=0x0;_0x1ebf97<_0x403019['length'];_0x1ebf97++){let _0x23cf30=_0x403019[_0x1ebf97]['id'],_0x32f95e=JSON[_0x2f0240(0x116)](_0x403019[_0x1ebf97][_0x2f0240(0x121)]);await this[_0x2f0240(0x190)](_0x23cf30,_0x32f95e,_0xb0bbfb);}}}}async[a0_0x146753(0x15e)](){const _0x1f3cad=a0_0x4d9e49,_0x26d193=a0_0x146753;for(let _0x472cac in this[_0x1f3cad(0x229)]){let _0x17dcc0=this[_0x1f3cad(0x229)][_0x472cac];if(!_0x17dcc0)return;await _0x17dcc0[_0x26d193(0x17e)](enumeration[_0x26d193(0xf8)][_0x1f3cad(0x1b0)])[_0x1f3cad(0x1f3)](_0x5a034e=>{const _0x373224=_0x26d193;logger[_0x373224(0x100)](_0x5a034e[_0x373224(0x13e)]);});}}[a0_0x146753(0x195)](_0x2520b3){const _0x44e5d3=a0_0x4d9e49,_0x31c33d=a0_0x146753;this[_0x31c33d(0x11c)]=Date[_0x44e5d3(0x238)]();if(this[_0x44e5d3(0x1c0)]){let _0x105f57=utils[_0x31c33d(0x16f)](this['unionData']);return _0x105f57;}else return null;}['getUnionRoomList'](){const _0x4ccf10=a0_0x146753;this[_0x4ccf10(0x11c)]=Date[_0x4ccf10(0xfc)]();let _0x513a86=[];for(let _0x1ea87c in this[_0x4ccf10(0x10c)]){if(this[_0x4ccf10(0x10c)][_0x4ccf10(0x192)](_0x1ea87c)){let _0x59ca30=this[_0x4ccf10(0x10c)][_0x1ea87c][_0x4ccf10(0x1a7)]();!!_0x59ca30&&!_0x59ca30[_0x4ccf10(0x170)]&&_0x513a86[_0x4ccf10(0x133)](this[_0x4ccf10(0x10c)][_0x1ea87c][_0x4ccf10(0x1a7)]());}}return _0x513a86;}[a0_0x146753(0x102)](){const _0xb353a3=a0_0x146753;if(!this[_0xb353a3(0x101)])return 0x0;else return this[_0xb353a3(0x101)][_0xb353a3(0x130)];}async[a0_0x146753(0xf7)](_0xca5333){const _0x2b739c=a0_0x4d9e49,_0x38bc40=a0_0x146753;if(!this[_0x38bc40(0x101)])throw new Error(code[_0x38bc40(0x135)]);return await commonDao[_0x2b739c(0x20d)](_0x38bc40(0x17d),{'unionID':this[_0x38bc40(0x144)]},_0xca5333),this[_0x38bc40(0x101)]=await commonDao[_0x2b739c(0x21e)](_0x38bc40(0x17d),{'unionID':this[_0x2b739c(0x1fd)]}),code['OK'];}async[a0_0x4d9e49(0x1f4)](_0x28274f){const _0x4a576b=a0_0x4d9e49,_0x1300c1=a0_0x146753;if(!this[_0x4a576b(0x1c0)])throw new Error(code[_0x1300c1(0x135)]);if(this[_0x1300c1(0x101)][_0x1300c1(0x160)]===_0x28274f)return;await commonDao[_0x1300c1(0x167)](_0x1300c1(0x17d),{'unionID':this[_0x1300c1(0x144)]},{'notice':_0x28274f}),this[_0x1300c1(0x101)][_0x1300c1(0x160)]=_0x28274f;}async[a0_0x146753(0x111)](_0x43d190){const _0x1a4e59=a0_0x4d9e49,_0x20f997=a0_0x146753;if(!this[_0x20f997(0x101)])throw new Error(code['FAIL']);let _0x2f9ae8=await commonDao[_0x1a4e59(0x21e)](_0x20f997(0x19d),{'uid':_0x43d190});await commonDao[_0x1a4e59(0x20d)](_0x20f997(0x17d),{'unionID':this[_0x1a4e59(0x1fd)]},{'ownerUid':_0x43d190,'ownerNickname':_0x2f9ae8[_0x20f997(0x14b)],'ownerAvatar':_0x2f9ae8[_0x1a4e59(0x1b9)]}),this[_0x1a4e59(0x1c0)][_0x1a4e59(0x1b8)]=_0x43d190;}async[a0_0x146753(0x15f)](_0x488b75){const _0x3ae193=a0_0x4d9e49,_0x5b0361=a0_0x146753;if(!this[_0x5b0361(0x101)])throw new Error(code[_0x5b0361(0x135)]);if(this[_0x5b0361(0x101)][_0x5b0361(0x1a6)]===_0x488b75)return;await commonDao[_0x5b0361(0x167)](_0x5b0361(0x17d),{'unionID':this[_0x3ae193(0x1fd)]},{'unionName':_0x488b75}),this[_0x3ae193(0x1c0)][_0x5b0361(0x1a6)]=_0x488b75;}async[a0_0x4d9e49(0x1a8)](_0x380146){const _0x560978=a0_0x4d9e49,_0x59e2d1=a0_0x146753;if(!this['unionData'])throw new Error(code[_0x59e2d1(0x135)]);if(this[_0x59e2d1(0x101)]['pumpWaterPattern']===_0x380146)return;await commonDao[_0x560978(0x20d)](_0x560978(0x24f),{'unionID':this[_0x59e2d1(0x144)]},{'pumpWaterPattern':_0x380146}),this[_0x59e2d1(0x101)][_0x59e2d1(0x10f)]=_0x380146;}async[a0_0x146753(0x142)](_0x355c14){const _0x4b9227=a0_0x4d9e49,_0x5646e3=a0_0x146753;if(!this[_0x5646e3(0x101)])throw new Error(code[_0x5646e3(0x135)]);if(this['unionData'][_0x5646e3(0x151)]===_0x355c14)return;if(_0x355c14<=0x0)return;await commonDao[_0x5646e3(0x167)](_0x5646e3(0x17d),{'unionID':this[_0x4b9227(0x1fd)]},{'serverScore':_0x355c14}),this[_0x4b9227(0x1c0)][_0x5646e3(0x151)]=_0x355c14;}async[a0_0x146753(0xf9)](_0x50985d,_0x1bcfc1){const _0x431fa5=a0_0x146753;if(!this['unionData'])throw new Error(code[_0x431fa5(0x135)]);await commonDao[_0x431fa5(0x167)](_0x431fa5(0x17d),{'unionID':_0x50985d},{'tableSort':_0x1bcfc1}),this[_0x431fa5(0x101)][_0x431fa5(0x14c)]=_0x1bcfc1;}async[a0_0x146753(0x127)](_0x5144b0,_0x2d73c0,_0x56b8ff,_0x392f88){const _0x5ea6d5=a0_0x4d9e49,_0x5ceb53=a0_0x146753;if(!this[_0x5ceb53(0x101)])throw new Error(code[_0x5ea6d5(0x1b6)]);await commonDao[_0x5ceb53(0x167)](_0x5ea6d5(0x24f),{'unionID':_0x5144b0},{'tableColor':_0x2d73c0,'unionBg':_0x56b8ff,'tableStyle':_0x392f88}),this[_0x5ceb53(0x101)][_0x5ceb53(0x174)]=_0x2d73c0,this[_0x5ceb53(0x101)][_0x5ceb53(0x119)]=_0x56b8ff,this[_0x5ceb53(0x101)][_0x5ceb53(0x152)]=_0x392f88;}async[a0_0x146753(0x12a)](){const _0x2d3304=a0_0x4d9e49,_0x190d02=a0_0x146753;if(!this[_0x190d02(0x101)])throw new Error(code[_0x2d3304(0x1b6)]);await commonDao[_0x2d3304(0x20d)](_0x190d02(0x17d),{'unionID':this[_0x190d02(0x144)]},{'isDel':!![]}),await commonDao[_0x2d3304(0x210)](_0x190d02(0x19d),{'unionInfo.unionID':this[_0x190d02(0x144)]},{'$pull':{'unionInfo':{'unionID':this[_0x190d02(0x144)]}}}),this[_0x2d3304(0x1c0)][_0x190d02(0x12c)]=!![];}async[a0_0x146753(0x145)](_0x4fdce4){const _0x4c6c73=a0_0x4d9e49,_0x45e556=a0_0x146753;if(!this[_0x4c6c73(0x1c0)])throw new Error(code[_0x45e556(0x135)]);if(this[_0x45e556(0x101)][_0x45e556(0x120)]===_0x4fdce4)return;await commonDao[_0x45e556(0x167)](_0x4c6c73(0x24f),{'unionID':this[_0x45e556(0x144)]},{'noticeSwitch':_0x4fdce4}),this[_0x45e556(0x101)][_0x45e556(0x1a6)]=unionName;}async[a0_0x146753(0x16b)](_0x43d386,_0x337c31,_0x331649,_0x48fdfe,_0x29aefe){const _0x5a4291=a0_0x4d9e49,_0x4d6ec0=a0_0x146753;if(!this[_0x4d6ec0(0x101)])return code[_0x4d6ec0(0x135)];let _0x37653b={'status':_0x43d386,'startTime':_0x337c31,'endTime':_0x331649,'count':_0x48fdfe,'totalScore':_0x29aefe},_0x44a316={'hongBaoInfo':_0x37653b};if(!_0x43d386)this[_0x4d6ec0(0x101)][_0x4d6ec0(0x197)]=[],this[_0x5a4291(0x1c0)][_0x5a4291(0x1f9)]=[],_0x44a316[_0x4d6ec0(0x197)]=[],_0x44a316[_0x4d6ec0(0x13f)]=[];else{if(this[_0x5a4291(0x1c0)][_0x4d6ec0(0x197)][_0x4d6ec0(0x15c)]===0x0)this[_0x5a4291(0x1c0)][_0x4d6ec0(0x197)]=utils[_0x4d6ec0(0x105)](_0x37653b[_0x4d6ec0(0x103)],_0x37653b[_0x4d6ec0(0x1a0)]),this[_0x4d6ec0(0x101)][_0x5a4291(0x1f9)]=[],_0x44a316[_0x4d6ec0(0x13f)]=this[_0x4d6ec0(0x101)][_0x4d6ec0(0x197)],_0x44a316[_0x4d6ec0(0x13f)]=[];else return code[_0x5a4291(0x1f5)];}return await commonDao[_0x4d6ec0(0x167)](_0x4d6ec0(0x17d),{'unionID':this[_0x4d6ec0(0x144)]},_0x44a316),this[_0x5a4291(0x1c0)][_0x4d6ec0(0x163)]=_0x37653b,code['OK'];}async[a0_0x146753(0x19c)](_0x264f27){const _0x5aa34a=a0_0x4d9e49,_0x2cb640=a0_0x146753;if(!this[_0x5aa34a(0x1c0)])return logger[_0x2cb640(0x100)](_0x2cb640(0x19c),_0x5aa34a(0x1a6)),-0x1;let _0x14027a=this[_0x2cb640(0x101)][_0x2cb640(0x163)];if(!_0x14027a||!_0x14027a[_0x5aa34a(0x1ac)])return-0x1;let _0x420cb3=new Date(),_0x1bb91f=_0x420cb3[_0x2cb640(0x10a)]();if(_0x1bb91f<_0x14027a[_0x2cb640(0x199)]||_0x1bb91f>=_0x14027a[_0x2cb640(0x18d)])return-0x1;if(_0x14027a[_0x2cb640(0x103)]<=0x0||_0x14027a[_0x2cb640(0x1a0)]<=0x0)return-0x1;if(this[_0x5aa34a(0x1c0)][_0x2cb640(0x197)]['length']===0x0)return 0x0;if(this[_0x2cb640(0x101)][_0x2cb640(0x13f)][_0x2cb640(0x148)](_0x264f27)!==-0x1)return 0x0;let _0x5d385f=this[_0x2cb640(0x101)][_0x2cb640(0x197)][_0x2cb640(0x14d)]();this[_0x2cb640(0x101)]['hongBaoUidList'][_0x2cb640(0x133)](_0x264f27);let _0x3cb11d={'$inc':{'unionInfo.$.score':_0x5d385f}},_0x2b666b=await userDao[_0x2cb640(0x108)]({'uid':_0x264f27,'unionInfo.unionID':this[_0x2cb640(0x144)]},_0x3cb11d),_0x453be2=_0x2b666b[_0x2cb640(0x140)][_0x2cb640(0x134)](function(_0x3a016d){const _0x10c0c6=_0x2cb640;return _0x3a016d[_0x10c0c6(0x144)]===this[_0x10c0c6(0x144)];}[_0x2cb640(0x1a2)](this));if(!_0x453be2)return-0x1;let _0x2809db={'uid':_0x264f27,'nickname':_0x2b666b[_0x2cb640(0x14b)],'unionID':this[_0x2cb640(0x144)],'changeCount':_0x5d385f,'leftCount':_0x453be2[_0x2cb640(0x11d)],'leftSafeBoxCount':_0x453be2[_0x2cb640(0x154)],'changeType':enumeration[_0x2cb640(0x169)][_0x2cb640(0x113)],'describe':_0x2cb640(0x164)+_0x5d385f,'createTime':Date['now']()};return commonDao[_0x2cb640(0x126)](_0x2cb640(0x189),_0x2809db)[_0x2cb640(0xfb)](_0x2cd014=>{const _0x547c64=_0x5aa34a,_0x521537=_0x2cb640;logger[_0x521537(0x100)](_0x2cd014[_0x547c64(0x22b)]);}),commonDao[_0x2cb640(0x167)](_0x2cb640(0x17d),{'unionID':this[_0x2cb640(0x144)]},{'hongBaoScoreList':this[_0x5aa34a(0x1c0)][_0x2cb640(0x197)],'$push':{'hongBaoUidList':_0x264f27}})[_0x2cb640(0xfb)](_0x4a1a30=>{const _0x5b64ac=_0x2cb640;logger[_0x5b64ac(0x100)](_0x4a1a30[_0x5b64ac(0x13e)]);}),{'score':_0x5d385f,'updateUserData':{'unionInfo':_0x2b666b[_0x2cb640(0x140)]}};}async[a0_0x4d9e49(0x21f)](_0x3959a8){const _0x351b09=a0_0x4d9e49,_0x492fcf=a0_0x146753;if(!this['unionData'])throw new Error(code[_0x492fcf(0x135)]);if(this[_0x492fcf(0x101)][_0x492fcf(0x15a)]===_0x3959a8)return;await commonDao[_0x351b09(0x20d)](_0x351b09(0x24f),{'unionID':this[_0x492fcf(0x144)]},{'opening':_0x3959a8}),this[_0x492fcf(0x101)][_0x492fcf(0x15a)]=_0x3959a8;}async[a0_0x4d9e49(0x23b)](_0x21496c){const _0x2b5a89=a0_0x4d9e49,_0x2d4583=a0_0x146753;if(!this[_0x2d4583(0x101)])throw new Error(code[_0x2d4583(0x135)]);if(!this[_0x2d4583(0x101)][_0x2d4583(0x12b)])this[_0x2d4583(0x101)][_0x2b5a89(0x1d7)]={};if(this[_0x2d4583(0x101)][_0x2d4583(0x12b)][_0x2d4583(0x198)]===_0x21496c)return;this[_0x2d4583(0x101)]['resultLotteryInfo'][_0x2d4583(0x198)]=_0x21496c,await commonDao[_0x2d4583(0x167)](_0x2d4583(0x17d),{'unionID':this[_0x2b5a89(0x1fd)]},{'resultLotteryInfo':this[_0x2d4583(0x101)][_0x2d4583(0x12b)]});for(let _0x4fdfca in this[_0x2d4583(0x10c)]){if(this[_0x2d4583(0x10c)][_0x2d4583(0x192)](_0x4fdfca)){let _0x101a5a=this[_0x2d4583(0x10c)][_0x4fdfca];_0x101a5a['updateLotteryInfo'](this['unionData'][_0x2d4583(0x12b)]);}}}[a0_0x146753(0x182)](){const _0x53d1aa=a0_0x146753;if(!this[_0x53d1aa(0x101)])return{};return this[_0x53d1aa(0x101)][_0x53d1aa(0x12b)]||{};}async[a0_0x4d9e49(0x1f7)](){const _0x272590=a0_0x4d9e49,_0x155c49=a0_0x146753;if(!this[_0x155c49(0x101)])throw new Error(code[_0x155c49(0x135)]);let _0x240144=await commonDao[_0x155c49(0x11a)](_0x155c49(0x17d),{'unionID':this[_0x155c49(0x144)]});if(!_0x240144)throw new Error(code[_0x155c49(0x135)]);this[_0x272590(0x1c0)]['showRank']=!!_0x240144[_0x155c49(0x161)],this[_0x155c49(0x101)][_0x155c49(0x1a3)]=!!_0x240144[_0x155c49(0x1a3)],this[_0x272590(0x1c0)][_0x272590(0x1da)]=!!_0x240144['showSingleRank'],this[_0x272590(0x1c0)][_0x155c49(0x1a9)]=!!_0x240144[_0x155c49(0x1a9)],this[_0x272590(0x1c0)]['forbidGive']=!!_0x240144[_0x155c49(0x107)];}async[a0_0x146753(0xff)](_0x1837f4,_0x51399b,_0x36c57a){const _0x4b0f4f=a0_0x4d9e49,_0x23a350=a0_0x146753;if(!this[_0x23a350(0x101)])throw new Error(code[_0x23a350(0x135)]);let _0x3652e7=_0x36c57a+moment()[_0x23a350(0x118)]('x'),_0x1f8301={'gameRule':JSON[_0x23a350(0xfa)](_0x1837f4),'ruleName':_0x51399b,'gameType':_0x36c57a,'createTime':_0x3652e7},_0x2c8270=await commonDao[_0x23a350(0x165)](_0x23a350(0x17d),{'unionID':this[_0x23a350(0x144)]},{'$push':{'roomRuleList':_0x1f8301}}),_0x1e30f8=[];for(let _0x30b5c5=0x0;_0x30b5c5<_0x2c8270[_0x23a350(0x168)][_0x23a350(0x15c)];++_0x30b5c5){_0x1e30f8[_0x23a350(0x133)](_0x2c8270[_0x23a350(0x168)][_0x30b5c5][_0x23a350(0x16d)]);}this[_0x23a350(0x101)][_0x23a350(0x168)]=_0x1e30f8;let _0x4da819=_0x2c8270[_0x23a350(0x168)][_0x23a350(0x134)](_0x1d042e=>_0x1d042e[_0x4b0f4f(0x1fc)]==_0x3652e7);return _0x4da819;}async[a0_0x4d9e49(0x1dc)](_0x58b8b0,_0x262ec4,_0x2c9d6f,_0x3b3ae1){const _0x140d35=a0_0x4d9e49,_0x336720=a0_0x146753;if(!this[_0x140d35(0x1c0)])throw new Error(code[_0x336720(0x135)]);let _0x2ff735={'roomRuleList.$.gameRule':JSON[_0x336720(0xfa)](_0x262ec4),'roomRuleList.$.ruleName':_0x2c9d6f,'roomRuleList.$.gameType':_0x3b3ae1},_0x45d59e=await commonDao[_0x336720(0x165)](_0x140d35(0x24f),{'unionID':this[_0x140d35(0x1fd)],'roomRuleList._id':_0x58b8b0},_0x2ff735),_0xc32ba3=[];for(let _0x396150=0x0;_0x396150<_0x45d59e[_0x140d35(0x206)][_0x140d35(0x1f0)];++_0x396150){_0xc32ba3[_0x336720(0x133)](_0x45d59e[_0x336720(0x168)][_0x396150][_0x336720(0x16d)]);}this[_0x336720(0x101)][_0x336720(0x168)]=_0xc32ba3;}async[a0_0x146753(0x186)](_0x12fa19){const _0x2f4329=a0_0x4d9e49,_0x89d4ea=a0_0x146753;if(!this[_0x89d4ea(0x101)])throw new Error(code[_0x89d4ea(0x135)]);let _0x4bdd43=await commonDao[_0x2f4329(0x1b4)](_0x89d4ea(0x17d),{'unionID':this[_0x2f4329(0x1fd)]},{'$pull':{'roomRuleList':{'_id':_0x12fa19}}}),_0x57ce98=[];for(let _0x43ef4f=0x0;_0x43ef4f<_0x4bdd43[_0x2f4329(0x206)][_0x89d4ea(0x15c)];++_0x43ef4f){_0x57ce98[_0x2f4329(0x1dd)](_0x4bdd43[_0x89d4ea(0x168)][_0x43ef4f][_0x2f4329(0x21b)]);}this[_0x89d4ea(0x101)]['roomRuleList']=_0x57ce98;}async[a0_0x146753(0x17e)](_0x4d65b0){const _0x42943c=a0_0x4d9e49,_0x3a924a=a0_0x146753;let _0x337493=this[_0x42943c(0x229)][_0x4d65b0];if(!_0x337493)return![];return await _0x337493[_0x42943c(0x1eb)](enumeration[_0x42943c(0x1f1)][_0x3a924a(0x191)])[_0x3a924a(0xfb)](_0xf6c866=>{const _0x7258d9=_0x42943c,_0x23ad3b=_0x3a924a;logger[_0x7258d9(0x20e)](_0xf6c866[_0x23ad3b(0x13e)]);}),!![];}async[a0_0x146753(0x181)](_0x47ac6e,_0x48b28b){const _0x3d82db=a0_0x146753;let _0x42e7c7=this['roomList'][_0x48b28b];_0x42e7c7&&await _0x42e7c7[_0x3d82db(0x181)](_0x47ac6e);}async[a0_0x146753(0x18c)](_0x437859,_0x458e9e){const _0x570973=a0_0x4d9e49,_0x1f4a27=a0_0x146753;if(!_0x458e9e){let _0x5d2cb5=await commonDao[_0x1f4a27(0x11a)](_0x1f4a27(0x19d),{'uid':_0x437859});_0x458e9e=_0x5d2cb5[_0x1f4a27(0x183)];}let _0x4a1f1a=this[_0x1f4a27(0x10c)][_0x458e9e];if(_0x4a1f1a){let _0x2326dc=_0x4a1f1a[_0x1f4a27(0x141)][_0x437859];if(_0x2326dc&&_0x2326dc[_0x1f4a27(0x19f)]<_0x4a1f1a[_0x1f4a27(0x194)])return _0x4a1f1a[_0x1f4a27(0x19b)]>=0x1?0x0:await _0x4a1f1a[_0x1f4a27(0xf5)](_0x437859);else{let _0x1af4d8=_0x2326dc[_0x1f4a27(0x19f)],_0x42c017=0x0;for(let _0xa9b1d2 in _0x4a1f1a['userArr']){_0x4a1f1a[_0x570973(0x1e2)][_0x1f4a27(0x192)](_0xa9b1d2)&&(_0x4a1f1a[_0x570973(0x1e2)][_0xa9b1d2][_0x1f4a27(0x19f)]<_0x4a1f1a[_0x570973(0x1df)]&&(_0x42c017+=0x1));}return _0x42c017<_0x4a1f1a[_0x1f4a27(0x194)]?await _0x4a1f1a[_0x1f4a27(0x104)](_0x437859,_0x1af4d8,_0x42c017):code[_0x1f4a27(0x135)];}}else return code[_0x1f4a27(0x135)];}async[a0_0x4d9e49(0x1ed)](_0xdb53b9,_0x88c215,_0x50951a,_0x324545,_0x423245){const _0x5329e6=a0_0x4d9e49,_0x196d92=a0_0x146753;logger=logerService[_0x196d92(0x18a)](_0x423245);if(this[_0x196d92(0x144)]!==0x1){if(!this[_0x196d92(0x101)][_0x196d92(0x15a)])return code[_0x196d92(0x13d)];let _0x221598=_0x50951a[_0x196d92(0x140)][_0x196d92(0x134)](function(_0x32d4e5){const _0xe6fc93=a0_0x20c3,_0x31f736=_0x196d92;return _0x32d4e5[_0x31f736(0x144)]===this[_0xe6fc93(0x1fd)];}[_0x196d92(0x1a2)](this));if(!_0x221598)return code[_0x196d92(0xfe)];}if(this['unionID']!==0x1&&this[_0x196d92(0x101)][_0x196d92(0x18b)])for(let _0x9e1505 in this[_0x196d92(0x10c)]){let _0x45cc9c=this[_0x196d92(0x10c)][_0x9e1505];if(_0x45cc9c[_0x196d92(0x121)][_0x196d92(0x196)]==_0xdb53b9)return code[_0x196d92(0x123)];}let _0x40459b=_0x50951a[_0x196d92(0x18e)],_0x3e5508=_0x40459b+_0x196d92(0x137),_0x5bd9b7=redisService[_0x196d92(0x106)](_0x3e5508,0x2),_0x325721=_0xdb53b9+_0x196d92(0x188),_0x2a9a86=redisService[_0x196d92(0x106)](_0x325721,0x2);logger['info']('['+_0x50951a[_0x5329e6(0x1f6)]+_0x196d92(0x13a)+_0x5bd9b7+_0x196d92(0x19e)+_0x2a9a86);if(this[_0x196d92(0x144)]!==0x1&&this[_0x196d92(0x101)][_0x196d92(0x18b)]&&_0x2a9a86)return code[_0x196d92(0x123)];if(_0x5bd9b7)return code[_0x196d92(0x150)];this[_0x196d92(0x11c)]=Date[_0x196d92(0xfc)]();if(!!_0xdb53b9){let _0x3bf965=null;for(let _0x546b03=0x0;_0x546b03<this[_0x196d92(0x101)][_0x196d92(0x168)][_0x196d92(0x15c)];++_0x546b03){if(this[_0x196d92(0x101)][_0x196d92(0x168)][_0x546b03][_0x196d92(0x196)][_0x5329e6(0x1c1)]()===_0xdb53b9){_0x3bf965=this[_0x5329e6(0x1c0)][_0x196d92(0x168)][_0x546b03];break;}}if(!_0x3bf965)return redisService[_0x196d92(0x15b)](_0x325721),redisService[_0x196d92(0x15b)](_0x3e5508),code[_0x196d92(0x139)];_0x88c215=JSON[_0x196d92(0x116)](_0x3bf965['gameRule']),_0x88c215[_0x196d92(0xf4)]=_0x3bf965[_0x196d92(0xf4)],_0x88c215[_0x5329e6(0x1ba)]=_0x3bf965['ruleName'],_0x88c215[_0x196d92(0x196)]=_0x3bf965[_0x5329e6(0x1be)][_0x196d92(0x158)]();}if(this[_0x196d92(0x144)]!==0x1&&_0x88c215[_0x196d92(0x115)]===enumeration[_0x196d92(0x12f)][_0x196d92(0x10d)]){let _0x5130e0=gameConfig[_0x196d92(0x110)](_0x88c215[_0x196d92(0x131)],_0x88c215[_0x196d92(0xf4)]),_0x973a75=await userDao[_0x196d92(0x147)](this[_0x196d92(0x101)][_0x5329e6(0x1b8)]);if(_0x973a75[_0x196d92(0x10b)]<=0x0||_0x973a75[_0x196d92(0x10b)]<_0x5130e0)return redisService[_0x196d92(0x15b)](_0x325721),redisService[_0x5329e6(0x1de)](_0x3e5508),code[_0x196d92(0xf6)];}else{let _0x4cd7dd=await gameDataServices[_0x5329e6(0x226)](_0x50951a,_0x88c215);if(_0x4cd7dd)return redisService[_0x5329e6(0x1de)](_0x325721),redisService[_0x196d92(0x15b)](_0x3e5508),code['NOT_ENOUGH_GOLD'];}let _0x5f1ceb=unionManager[_0x196d92(0x193)](),_0x10c268=null;this[_0x196d92(0x144)]===0x1?_0x10c268={'creatorType':enumeration[_0x5329e6(0x224)][_0x196d92(0x149)],'uid':_0x50951a[_0x196d92(0x18e)]}:_0x10c268={'creatorType':enumeration[_0x196d92(0x1ab)][_0x5329e6(0x239)],'unionID':this[_0x196d92(0x144)],'unionType':this[_0x196d92(0x101)][_0x196d92(0x13b)],'ownerUid':this[_0x196d92(0x101)][_0x196d92(0x130)],'serverScore':this[_0x5329e6(0x1c0)][_0x196d92(0x151)]||0x0,'pumpWaterPattern':this[_0x196d92(0x101)][_0x196d92(0x10f)]||![]};let _0x2aa51d=null;_0x88c215[_0x196d92(0x112)]=_0x324545;let _0x54a51b=gameConfig[_0x196d92(0x109)](_0x88c215[_0x196d92(0xf4)]);if(_0x54a51b){let _0x3924bb=require(_0x5329e6(0x1f2)+_0x54a51b[_0x196d92(0x1aa)]);_0x2aa51d=new _0x3924bb(_0x5f1ceb,_0x10c268,_0x88c215);}else _0x2aa51d=new RoomFrame(_0x5f1ceb,_0x10c268,_0x88c215);let _0x12b506=code[_0x196d92(0x135)];return _0x88c215[_0x5329e6(0x1ee)]?_0x12b506=await _0x2aa51d[_0x196d92(0x10e)](_0x50951a):_0x12b506=await _0x2aa51d[_0x196d92(0x156)](_0x50951a),this[_0x196d92(0x10c)][_0x5f1ceb]=_0x2aa51d,logger[_0x5329e6(0x1c5)]('['+_0x50951a[_0x196d92(0x18e)]+_0x196d92(0x16a)+_0x5f1ceb+_0x196d92(0x128)+_0x88c215[_0x196d92(0x112)]+_0x196d92(0x157)+_0x12b506+'\x20'),_0x12b506!=code['OK']&&(logger[_0x196d92(0x155)]('['+_0x50951a[_0x196d92(0x18e)]+_0x5329e6(0x1ea)+_0x5f1ceb+'\x20'),this[_0x196d92(0x17e)](_0x5f1ceb)),redisService[_0x5329e6(0x1de)](_0x325721),redisService[_0x196d92(0x15b)](_0x3e5508),_0x12b506;}async[a0_0x146753(0x14a)](_0x4d56a8,_0x102163){const _0x4188db=a0_0x4d9e49,_0x4e7198=a0_0x146753;if(this['unionID']!==0x1){let _0x77fe32=_0x102163['unionInfo'][_0x4188db(0x23f)](function(_0x2aaa61){const _0xef686f=a0_0x3068;return _0x2aaa61[_0xef686f(0x144)]===this[_0xef686f(0x144)];}[_0x4188db(0x1a0)](this));if(!_0x77fe32&&!_0x102163[_0x4188db(0x24e)])return code[_0x4e7198(0x125)];}let _0x9cb51d=_0x102163[_0x4e7198(0x18e)],_0x209ba2=_0x9cb51d+_0x4e7198(0x137),_0x474c8a=redisService[_0x4188db(0x22e)](_0x209ba2,0x2);if(_0x474c8a)return code[_0x4e7198(0x19a)];this[_0x4e7198(0x11c)]=Date[_0x4e7198(0xfc)]();let _0x368f02=this[_0x4e7198(0x10c)][_0x4d56a8];if(!_0x368f02)return redisService[_0x4e7198(0x15b)](_0x209ba2),code[_0x4e7198(0x139)];else{let _0x5a330c=await _0x368f02[_0x4e7198(0x156)](_0x102163);return redisService[_0x4e7198(0x15b)](_0x209ba2),_0x5a330c;}}async[a0_0x146753(0x114)](_0x2c28b9,_0x2b324e){const _0x3a04bd=a0_0x4d9e49,_0xdf9c26=a0_0x146753;let _0x5e81de=_0x2b324e[_0xdf9c26(0x18e)],_0x15e884=_0x5e81de+_0x3a04bd(0x1fe),_0x4fe3b3=redisService[_0xdf9c26(0x106)](_0x15e884,0x2);if(_0x4fe3b3)return logger[_0x3a04bd(0x1c5)]('['+_0x2b324e[_0xdf9c26(0x18e)]+_0x3a04bd(0x1a4)+_0x4fe3b3+'\x20'),code['OK'];if(this[_0xdf9c26(0x144)]!==0x1){let _0x308891=_0x2b324e[_0x3a04bd(0x228)][_0x3a04bd(0x23f)](function(_0xd7cfdb){const _0x1fc801=_0x3a04bd,_0x553b67=_0xdf9c26;return _0xd7cfdb[_0x553b67(0x144)]===this[_0x1fc801(0x1fd)];}[_0xdf9c26(0x1a2)](this));if(!_0x308891&&!_0x2b324e[_0xdf9c26(0x16c)])return code[_0x3a04bd(0x207)];}this[_0xdf9c26(0x11c)]=Date[_0xdf9c26(0xfc)]();let _0x576798=this[_0xdf9c26(0x10c)][_0x2c28b9];if(!_0x576798)return code[_0xdf9c26(0x139)];else{let _0x389e30=await _0x576798[_0xdf9c26(0x10e)](_0x2b324e);return _0x389e30;}}async[a0_0x4d9e49(0x222)](_0x5dcb2d,_0x1fc10a){const _0x4ae9ae=a0_0x4d9e49,_0x4a76a1=a0_0x146753;let _0x3615ff=_0x1fc10a[_0x4a76a1(0x18e)],_0x4ff954=_0x3615ff+_0x4a76a1(0x137),_0x3b49ec=redisService[_0x4a76a1(0x106)](_0x4ff954,0x3);if(_0x3b49ec)return;this[_0x4a76a1(0x11c)]=Date[_0x4a76a1(0xfc)]();let _0x45a02d=null;for(let _0x171f2e=0x0;_0x171f2e<this['unionData'][_0x4a76a1(0x168)][_0x4a76a1(0x15c)];++_0x171f2e){if(this[_0x4a76a1(0x101)][_0x4a76a1(0x168)][_0x171f2e][_0x4a76a1(0x196)][_0x4a76a1(0x158)]()===_0x5dcb2d){_0x45a02d=this[_0x4a76a1(0x101)][_0x4ae9ae(0x206)][_0x171f2e];break;}}if(!_0x45a02d)return redisService[_0x4a76a1(0x15b)](_0x4ff954),code[_0x4a76a1(0x139)];for(let _0x40b165 in this['roomList']){if(this[_0x4ae9ae(0x229)][_0x4a76a1(0x192)](_0x40b165)){let _0x14325d=this[_0x4ae9ae(0x229)][_0x40b165];if(!_0x14325d[_0x4a76a1(0x17b)]&&!_0x14325d[_0x4a76a1(0x180)]&&_0x14325d[_0x4a76a1(0x121)][_0x4a76a1(0x196)]===_0x5dcb2d&&_0x14325d[_0x4a76a1(0x166)]()&&_0x14325d[_0x4ae9ae(0x1d8)]())return redisService['unLock'](_0x4ff954),await this[_0x4a76a1(0x14a)](_0x14325d[_0x4a76a1(0x183)],_0x1fc10a);}}let _0x5db70d=unionManager['createNewRoomID'](),_0x5b95b8=null;this[_0x4a76a1(0x144)]===0x1?_0x5b95b8={'creatorType':enumeration[_0x4a76a1(0x1ab)][_0x4ae9ae(0x1a3)],'uid':_0x1fc10a[_0x4a76a1(0x18e)]}:_0x5b95b8={'creatorType':enumeration[_0x4a76a1(0x1ab)][_0x4a76a1(0x172)],'unionID':this[_0x4a76a1(0x144)]};let _0x2ab1d2=JSON[_0x4a76a1(0x116)](_0x45a02d[_0x4a76a1(0x121)]);_0x2ab1d2[_0x4a76a1(0xf4)]=_0x45a02d[_0x4ae9ae(0x212)],_0x2ab1d2[_0x4ae9ae(0x1ba)]=_0x45a02d[_0x4a76a1(0x12e)],_0x2ab1d2[_0x4a76a1(0x196)]=_0x45a02d[_0x4a76a1(0x196)][_0x4a76a1(0x158)]();let _0x1b5af5=new RoomFrame(_0x5db70d,_0x5b95b8,_0x2ab1d2);return this[_0x4a76a1(0x10c)][_0x5db70d]=_0x1b5af5,_0x1b5af5[_0x4a76a1(0x122)](this[_0x4a76a1(0x182)]()),redisService[_0x4a76a1(0x15b)](_0x4ff954),await _0x1b5af5[_0x4a76a1(0x156)](_0x1fc10a);}[a0_0x146753(0x171)](_0x2634eb){const _0x5039df=a0_0x146753;delete this[_0x5039df(0x10c)][_0x2634eb];}['getRoomByID'](_0x49fed9){const _0x2fa38e=a0_0x146753;return this[_0x2fa38e(0x10c)][_0x49fed9];}[a0_0x146753(0x129)](){const _0x398521=a0_0x4d9e49,_0x326db2=a0_0x146753;return!!this[_0x326db2(0x101)]&&this[_0x398521(0x1c0)][_0x326db2(0x15a)];}[a0_0x146753(0x16e)](){const _0x46f261=a0_0x4d9e49;return this[_0x46f261(0x252)];}[a0_0x146753(0x178)](_0x56b42c){const _0x273bc4=a0_0x4d9e49,_0x5ec207=a0_0x146753;return utils[_0x5ec207(0x179)](this[_0x273bc4(0x229)])===0x0&&this[_0x5ec207(0x11c)]-Date[_0x5ec207(0xfc)]()>_0x56b42c;}[a0_0x146753(0x173)](){const _0x482fe4=a0_0x4d9e49,_0x36120f=a0_0x146753;return;if(!this[_0x482fe4(0x1c0)])return;!!this[_0x36120f(0x101)][_0x36120f(0x163)]&&((this[_0x36120f(0x101)][_0x482fe4(0x213)][_0x36120f(0x197)][_0x36120f(0x15c)]!==0x0||this[_0x36120f(0x101)][_0x36120f(0x163)][_0x36120f(0x13f)][_0x36120f(0x15c)]!==0x0)&&(this[_0x482fe4(0x1c0)][_0x36120f(0x163)][_0x36120f(0x197)]=[],this[_0x36120f(0x101)][_0x36120f(0x163)][_0x36120f(0x13f)]=[]),commonDao[_0x36120f(0x167)](_0x36120f(0x17d),{'unionID':this[_0x36120f(0x144)]},{'hongBaoUidList':[],'hongBaoScoreList':[]})[_0x36120f(0xfb)](_0x14fc6d=>{const _0x145e27=_0x36120f;logger[_0x145e27(0x100)](_0x14fc6d[_0x145e27(0x13e)]);}));}async[a0_0x4d9e49(0x1b5)](_0x19986c,_0x3e7aa5,_0x5f0532){const _0xf35c9b=a0_0x4d9e49,_0x40d637=a0_0x146753;if(this[_0xf35c9b(0x1fd)]!==0x1){if(!this[_0x40d637(0x101)][_0x40d637(0x15a)])return code[_0x40d637(0x13d)];let _0x41d49a=_0x5f0532[_0x40d637(0x140)][_0x40d637(0x134)](_0x4c2bcb=>_0x4c2bcb[_0x40d637(0x144)]==this[_0x40d637(0x144)]);if(!_0x41d49a)return code[_0x40d637(0xfe)];if(!_0x41d49a[_0x40d637(0x1a8)]&&_0x5f0532[_0x40d637(0x18e)]!=this[_0xf35c9b(0x1c0)][_0xf35c9b(0x1b8)])return code['PERMISSION_NOT_ENOUGH'];}this[_0x40d637(0x11c)]=Date['now']();if(!!_0x19986c){let _0x5be7cc=this[_0x40d637(0x101)][_0x40d637(0x168)][_0xf35c9b(0x23f)](_0x5c46a8=>_0x5c46a8[_0xf35c9b(0x1be)]==_0x19986c);if(!_0x5be7cc)return code[_0x40d637(0x139)];_0x3e7aa5=JSON[_0x40d637(0x116)](_0x5be7cc[_0x40d637(0x121)]),_0x3e7aa5[_0x40d637(0xf4)]=_0x5be7cc['gameType'],_0x3e7aa5[_0x40d637(0x12e)]=_0x5be7cc[_0x40d637(0x12e)],_0x3e7aa5[_0xf35c9b(0x1be)]=_0x5be7cc[_0x40d637(0x196)]['toString']();}let _0x662d91=logerService[_0x40d637(0x18a)](_0x3e7aa5[_0x40d637(0xf4)]),_0xbb55a3=unionManager[_0xf35c9b(0x209)](),_0x47b957=null;this[_0xf35c9b(0x1fd)]===0x1?_0x47b957={'ruleID':_0x19986c,'roomType':enumeration[_0x40d637(0x17c)][_0xf35c9b(0x1c4)],'creatorType':enumeration[_0xf35c9b(0x224)][_0x40d637(0x149)],'uid':_0x5f0532[_0x40d637(0x18e)]}:_0x47b957={'ruleID':_0x19986c,'roomType':enumeration[_0x40d637(0x17c)][_0x40d637(0x159)],'creatorType':enumeration[_0xf35c9b(0x224)][_0x40d637(0x172)],'unionID':this[_0x40d637(0x144)],'unionType':this[_0x40d637(0x101)][_0xf35c9b(0x1e4)],'ownerUid':this[_0xf35c9b(0x1c0)][_0x40d637(0x130)],'serverScore':this[_0x40d637(0x101)][_0x40d637(0x151)]||0x0,'pumpWaterPattern':this[_0x40d637(0x101)][_0x40d637(0x10f)]||![]};let _0xa43bca=null,_0x48c11a=gameConfig[_0x40d637(0x109)](_0x3e7aa5[_0x40d637(0xf4)]);if(_0x48c11a){let _0x22509e=require(_0x40d637(0x185)+_0x48c11a[_0x40d637(0x1aa)]);_0xa43bca=new _0x22509e(_0xbb55a3,_0x47b957,_0x3e7aa5);}let _0x461bd6=code['OK'];return this[_0xf35c9b(0x229)][_0xbb55a3]=_0xa43bca,_0x662d91[_0x40d637(0x155)]('['+_0x5f0532[_0x40d637(0x18e)]+_0xf35c9b(0x248)),this[_0x40d637(0x144)]==0x1&&(_0x461bd6=await _0xa43bca[_0x40d637(0x156)](_0x5f0532)),_0x461bd6;}}module[a0_0x146753(0xfd)]=union;