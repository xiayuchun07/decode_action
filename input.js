function a0_0x4e45(){const _0x127a5e=['nickname','buildClientConfig','config','SERVER_MAINTENANCE','exports','logic','dispatch','1064xALZqg','27009UajyJd','game.roomRemote.leaveRoom','6308McjTtW','deviceID','logout','2600YogAcC','getClientAddressBySessionId','getServerId','../../../services/pomeloServices','7117205LegHKd','1190386ayOukP','parseToken','19cZVdwz','createUserThenLoad','uid','TOKEN_INFO_ERROR','6edTgiF','../../../util/token','../../../constant/code','account','844944zZYZet','2046444HVvupO','roomID','587139UWwaZX','accountModel','pop','4503672ZtJefx','232jJSZGG','allServerStarted','not\x20find\x20leave\x20user\x20uid:','../../../dao/commonDao','getRoomGameDataByRoomID','kickUserPush','user\x20entry\x20data\x20=\x20','2140ihxpfF','getLogger','bind','5EeqaRF','findOneData','onUserLeave\x20error:','\x20userlastLoginTime\x20=\x20','getUserDataByUid','gameType','push','../../../services/userInfoServices','BLOCKED_ACCOUNT','phoneAccount','../../../dao/userDao','../../../util/dispatcher','842370WfZDbM','getNewUserEmail','rpc','error','slice','getByUid','length',']\x20close\x20session\x20and\x20leave\x20begin\x20lastLoginTime\x20=\x20','get','12953328dJanJy','kick\x20uid\x20err','checkToken','../../../API/pushAPI','sessionService','isBlockedAccount','pushAll','mobilePhone','updateUserDataByUid','connector\x20entry\x20error:','../../../services/configServices','3959200gQDrFC','number','pushSessionData','lastLoginIP','now','closed','kick','leave\x20wrong\x20lastLoginTime\x20=\x20','getServersByType','app','set','FAIL','504iMFvbM','game'];a0_0x4e45=function(){return _0x127a5e;};return a0_0x4e45();}const a0_0x544cf1=a0_0x1e61;(function(_0x5ae33,_0x48ddec){const _0x458884=a0_0x1e61,_0xe50b79=_0x5ae33();while(!![]){try{const _0x1e2edb=parseInt(_0x458884(0x241))/0x1+parseInt(_0x458884(0x21a))/0x2+-parseInt(_0x458884(0x224))/0x3+-parseInt(_0x458884(0x22a))/0x4+parseInt(_0x458884(0x219))/0x5*(-parseInt(_0x458884(0x220))/0x6)+parseInt(_0x458884(0x1fa))/0x7+parseInt(_0x458884(0x24a))/0x8;if(_0x1e2edb===_0x48ddec)break;else _0xe50b79['push'](_0xe50b79['shift']());}catch(_0x17648f){_0xe50b79['push'](_0xe50b79['shift']());}}}(a0_0x4e45,0xc131a));const a0_0x493ac1=a0_0x29a3;(function(_0x5d01ac,_0x4e4091){const _0x3a2720=a0_0x1e61,_0x3afbb2=a0_0x29a3,_0x4dfa64=_0x5d01ac();while(!![]){try{const _0x2c525a=-parseInt(_0x3afbb2(0xfb))/0x1*(parseInt(_0x3afbb2(0x102))/0x2)+-parseInt(_0x3afbb2(0xd7))/0x3*(-parseInt(_0x3afbb2(0xee))/0x4)+-parseInt(_0x3afbb2(0x104))/0x5*(-parseInt(_0x3afbb2(0x110))/0x6)+parseInt(_0x3afbb2(0xc9))/0x7+parseInt(_0x3afbb2(0xbe))/0x8*(parseInt(_0x3afbb2(0xe0))/0x9)+-parseInt(_0x3afbb2(0xe2))/0xa*(-parseInt(_0x3afbb2(0xc0))/0xb)+-parseInt(_0x3afbb2(0xd9))/0xc*(parseInt(_0x3afbb2(0xf2))/0xd);if(_0x2c525a===_0x4e4091)break;else _0x4dfa64[_0x3a2720(0x23b)](_0x4dfa64['shift']());}catch(_0x4d4e95){_0x4dfa64[_0x3a2720(0x23b)](_0x4dfa64['shift']());}}}(a0_0x19fa,0x653f6));let code=require(a0_0x493ac1(0xd8)),token=require(a0_0x493ac1(0x113)),userDao=require(a0_0x544cf1(0x23f)),logger=require(a0_0x493ac1(0x10f))[a0_0x493ac1(0xf3)](a0_0x493ac1(0xff)),userInfoServices=require(a0_0x544cf1(0x23c)),pomeloServices=require(a0_0x493ac1(0xdc)),configServices=require(a0_0x493ac1(0xfa)),dispatch=require(a0_0x493ac1(0xde)),rpcAPI=require('../../../API/rpcAPI'),commonDao=require(a0_0x493ac1(0xc4)),pushAPI=require(a0_0x544cf1(0x24d)),redisService=require('../../../services/redisService'),pomelo=require('pomelo');module[a0_0x493ac1(0xe5)]=function(_0x5d550a){return new Handler(_0x5d550a);};function a0_0x29a3(_0x4a8947,_0x55f494){const _0x3054a3=a0_0x19fa();return a0_0x29a3=function(_0x31773f,_0x2e0484){_0x31773f=_0x31773f-0xbe;let _0x3198bd=_0x3054a3[_0x31773f];return _0x3198bd;},a0_0x29a3(_0x4a8947,_0x55f494);}function a0_0x19fa(){const _0x49bd7e=a0_0x544cf1,_0x14eb61=['62124viOrMZ','updateUserData',_0x49bd7e(0x202),_0x49bd7e(0x218),'userInfo',_0x49bd7e(0x240),'prototype',_0x49bd7e(0x210),_0x49bd7e(0x236),_0x49bd7e(0x232),_0x49bd7e(0x200),_0x49bd7e(0x1f5),_0x49bd7e(0x20c),_0x49bd7e(0x214),'token',_0x49bd7e(0x213),'frontendId',_0x49bd7e(0x1fe),_0x49bd7e(0x217),_0x49bd7e(0x248),_0x49bd7e(0x20a),_0x49bd7e(0x212),'gameRule',_0x49bd7e(0x22f),_0x49bd7e(0x204),_0x49bd7e(0x215),_0x49bd7e(0x233),_0x49bd7e(0x1f7),_0x49bd7e(0x245),_0x49bd7e(0x234),_0x49bd7e(0x1f8),'lastLoginTime','app',_0x49bd7e(0x1f9),_0x49bd7e(0x21c),_0x49bd7e(0x1ff),_0x49bd7e(0x1fb),_0x49bd7e(0x239),_0x49bd7e(0x20d),_0x49bd7e(0x207),_0x49bd7e(0x24b),_0x49bd7e(0x20f),_0x49bd7e(0x1f3),_0x49bd7e(0x235),_0x49bd7e(0x242),_0x49bd7e(0x228),'info',_0x49bd7e(0x1fd),_0x49bd7e(0x211),'error',_0x49bd7e(0x223),'nickname',_0x49bd7e(0x205),'stringify','pomelo-logger',_0x49bd7e(0x225),_0x49bd7e(0x23e),_0x49bd7e(0x22c),_0x49bd7e(0x221),_0x49bd7e(0x22b),'emailArr','35123HYZzis',_0x49bd7e(0x21d),_0x49bd7e(0x216),_0x49bd7e(0x249),_0x49bd7e(0x22e),']\x20logout\x20close\x20session\x20and\x20leave\x20begin','entry',_0x49bd7e(0x22d),'isUserInRoom',_0x49bd7e(0x227),_0x49bd7e(0x21f),_0x49bd7e(0x247),'sex',_0x49bd7e(0x21e),_0x49bd7e(0x23a),_0x49bd7e(0x231),_0x49bd7e(0x230),_0x49bd7e(0x243),_0x49bd7e(0x1f6),'dispatch','roomID','address',_0x49bd7e(0x21b),_0x49bd7e(0x206),_0x49bd7e(0x222)];return a0_0x19fa=function(){return _0x14eb61;},a0_0x19fa();}let Handler=function(_0x4f2020){const _0x1caf2d=a0_0x493ac1;this[_0x1caf2d(0xf9)]=_0x4f2020;};Handler[a0_0x493ac1(0xdf)][a0_0x493ac1(0xc6)]=async function(_0x5b3073,_0x1557c3,_0x59df01){const _0x5536a2=a0_0x544cf1,_0x18d824=a0_0x493ac1;try{let _0x496f5a=this[_0x18d824(0xf9)][_0x18d824(0xc3)](_0x18d824(0x112));if(!_0x496f5a){_0x59df01(null,{'code':code[_0x5536a2(0x20b)]});return;}if(!_0x5b3073[_0x18d824(0xe7)]){_0x59df01(null,{'code':code['REQUEST_DATA_ERROR']});return;}let _0x57301d=token[_0x18d824(0xd6)](_0x5b3073[_0x18d824(0xe7)]);if(!token[_0x5536a2(0x24c)](_0x57301d)){logger[_0x18d824(0x107)](_0x18d824(0xcf)+JSON[_0x18d824(0x10e)](_0x5b3073)),_0x59df01(null,{'code':code[_0x18d824(0xca)]});return;}let _0x260349=_0x57301d['uid'],_0x26748d=await userDao[_0x18d824(0xfe)](_0x260349),_0x58310e=_0x5b3073[_0x18d824(0xdd)];_0x58310e[_0x18d824(0x10c)]&&_0x58310e[_0x18d824(0x10c)][_0x18d824(0xcb)]>0xb&&(_0x58310e[_0x18d824(0x10c)]=_0x58310e[_0x18d824(0x10c)]['slice'](0x0,0xb));let _0x45ad3d=this[_0x18d824(0xf9)][_0x18d824(0xc3)](_0x18d824(0x103)),_0x2578c2=await _0x45ad3d[_0x5536a2(0x246)](_0x260349);if(_0x2578c2&&_0x26748d[_0x18d824(0xe8)]!=_0x5b3073[_0x18d824(0xe8)]){let _0x5c1e55=_0x2578c2[0x0]&&_0x2578c2[0x0][_0x18d824(0xe9)];pushAPI[_0x18d824(0xd0)]({'uid':_0x260349},[{'uid':_0x260349,'sid':_0x5c1e55}]);}let _0x2489e6=Date[_0x18d824(0xea)](),_0x543109=function(){return new Promise((_0x11433e,_0x4470ec)=>{const _0x50766e=a0_0x29a3;_0x45ad3d[_0x50766e(0xe3)](_0x260349,function(_0x3581d2){const _0x3c64a9=_0x50766e;!!_0x3581d2&&logger[_0x3c64a9(0x10a)](_0x3c64a9(0x101)),_0x1557c3['on'](_0x3c64a9(0xfc),onUserLeave[_0x3c64a9(0xf6)](null,this[_0x3c64a9(0xf9)])),_0x1557c3[_0x3c64a9(0xf6)](_0x260349,function(_0x4ec1b0){const _0x29e88e=_0x3c64a9;!!_0x4ec1b0?_0x4470ec(code[_0x29e88e(0x10d)]):(_0x1557c3[_0x29e88e(0xf1)](_0x29e88e(0xf8),_0x2489e6),_0x1557c3[_0x29e88e(0xe4)](),_0x11433e());});}[_0x50766e(0xf6)](this));});}[_0x18d824(0xf6)](this);await _0x543109(),!_0x26748d&&(_0x26748d=await userInfoServices[_0x18d824(0xc1)](_0x260349,_0x58310e));if(!!_0x26748d[_0x5536a2(0x1f4)]){_0x59df01(null,{'code':code[_0x5536a2(0x23d)]});return;}let _0x1529a0='',_0x1294eb='',_0x2c9e50='';if(_0x26748d[_0x18d824(0xd4)]){let _0x45ad46=this[_0x18d824(0xf9)][_0x18d824(0xdb)](_0x18d824(0x100)),_0x11a509=dispatch[_0x18d824(0xd3)](_0x26748d[_0x18d824(0xd4)],_0x45ad46),_0x36d863=await rpcAPI[_0x18d824(0xc8)](_0x11a509['id'],_0x1557c3[_0x18d824(0xcd)],_0x26748d[_0x18d824(0xd4)]);if(_0x36d863){_0x1529a0=_0x26748d[_0x18d824(0xd4)],await pomeloServices[_0x5536a2(0x1fc)](_0x1557c3,_0x5536a2(0x226),_0x26748d[_0x18d824(0xd4)]);let _0x1c9fd7=await rpcAPI[_0x18d824(0xf0)](_0x11a509['id'],_0x1529a0);_0x1294eb=_0x1c9fd7[_0x18d824(0xce)],_0x2c9e50=_0x1c9fd7[_0x18d824(0xef)];}}let _0x4e9a93={'syncLock':0x0,'lastLoginIP':_0x45ad3d[_0x18d824(0xc2)](_0x1557c3['id'])['ip']['split'](':')[_0x5536a2(0x229)](),'lastLoginTime':_0x2489e6,'frontendId':this[_0x18d824(0xf9)][_0x18d824(0xeb)](),'roomID':_0x1529a0};if(_0x26748d[_0x18d824(0x10b)]==''||_0x26748d[_0x18d824(0xd2)]==''){let _0xb26de4=await commonDao[_0x18d824(0xe1)](_0x18d824(0x106),{'uid':_0x260349});_0xb26de4&&(_0x4e9a93[_0x18d824(0x10b)]=_0xb26de4[_0x18d824(0x10b)],_0x4e9a93[_0x5536a2(0x1f6)]=_0xb26de4[_0x18d824(0x111)]);}if(!!_0x58310e&&_0x58310e[_0x5536a2(0x208)])_0x4e9a93[_0x18d824(0x10c)]=_0x58310e[_0x18d824(0x10c)];if(!!_0x58310e&&_0x58310e[_0x18d824(0x108)])_0x4e9a93[_0x18d824(0x108)]=_0x58310e[_0x18d824(0x108)];if(!!_0x58310e&&_0x18d824(0xcc)in _0x58310e)_0x4e9a93[_0x18d824(0xcc)]=_0x58310e[_0x18d824(0xcc)];if(!!_0x58310e&&_0x18d824(0xd5)in _0x58310e)_0x4e9a93[_0x18d824(0xd5)]=_0x58310e[_0x18d824(0xd5)];if(_0x5536a2(0x213)in _0x5b3073)_0x4e9a93[_0x18d824(0xe8)]=_0x5b3073[_0x5536a2(0x213)];let _0x583dfb=userInfoServices[_0x18d824(0x105)](_0x26748d[_0x18d824(0xbf)],_0x26748d[_0x18d824(0xf8)]);if(!!_0x583dfb)_0x4e9a93[_0x18d824(0xbf)]=_0x583dfb;_0x26748d=await userDao[_0x18d824(0xf4)](_0x260349,_0x4e9a93),_0x26748d[_0x18d824(0x10c)]&&_0x26748d[_0x18d824(0x10c)][_0x18d824(0xcb)]>0x8&&(_0x26748d[_0x18d824(0x10c)]=_0x26748d[_0x18d824(0x10c)][_0x18d824(0xf5)](0x0,0x8)),(_0x26748d[_0x18d824(0xce)]=_0x1294eb,_0x26748d[_0x18d824(0xef)]=_0x2c9e50);let _0x43db2a=configServices[_0x5536a2(0x209)](this[_0x5536a2(0x203)][_0x18d824(0xc3)](_0x18d824(0xed)));_0x59df01(null,{'code':code['OK'],'msg':{'userInfo':_0x26748d,'config':_0x43db2a}});}catch(_0x30f744){logger[_0x18d824(0x10a)](_0x18d824(0xf7)+_0x30f744),_0x59df01(null,{'code':typeof _0x30f744!==_0x18d824(0xfd)?0x1f4:_0x30f744});}},Handler[a0_0x493ac1(0xdf)][a0_0x493ac1(0xe6)]=async function(_0x1636b7,_0x32b11f,_0x58d53e){const _0x1174d6=a0_0x544cf1,_0x592fc1=a0_0x493ac1;try{if(!_0x32b11f||!_0x32b11f[_0x1174d6(0x21e)])return;let _0x346f4e=_0x32b11f[_0x592fc1(0xcd)];logger[_0x592fc1(0x107)]('['+_0x346f4e+_0x592fc1(0xc5));try{let _0x529c92=await userDao['getUserDataByUid'](_0x32b11f[_0x592fc1(0xcd)]);if(!_0x529c92)logger[_0x1174d6(0x244)](_0x1174d6(0x22d)+_0x32b11f[_0x592fc1(0xcd)]);else{if(!!_0x529c92[_0x592fc1(0xd4)]){let _0x51c6da=dispatch[_0x1174d6(0x20e)](_0x529c92[_0x592fc1(0xd4)],app['getServersByType'](_0x592fc1(0x100)));rpcAPI[_0x592fc1(0xd1)](_0x592fc1(0x109),_0x51c6da['id'],_0x529c92[_0x592fc1(0xd4)],_0x32b11f[_0x592fc1(0xcd)],async function(_0x37f3af){});}let _0x27c19e=this[_0x1174d6(0x203)][_0x592fc1(0xc3)](_0x592fc1(0x103));_0x27c19e[_0x592fc1(0xe3)](_0x346f4e),await userDao[_0x592fc1(0xf4)](_0x32b11f[_0x592fc1(0xcd)],{'frontendId':''});}}catch(_0x5d83a3){logger[_0x592fc1(0x10a)]('onUserLeave\x20error:'+_0x5d83a3);}}catch(_0xb4f252){logger[_0x1174d6(0x244)](_0x1174d6(0x1f8)+_0xb4f252),_0x58d53e(null,{'code':typeof _0xb4f252!==_0x592fc1(0xfd)?0x1f4:_0xb4f252});}};function a0_0x1e61(_0x1398fc,_0x8adfef){const _0x4e45d0=a0_0x4e45();return a0_0x1e61=function(_0x1e614e,_0x54049b){_0x1e614e=_0x1e614e-0x1f3;let _0x1fbd22=_0x4e45d0[_0x1e614e];return _0x1fbd22;},a0_0x1e61(_0x1398fc,_0x8adfef);}let onUserLeave=async function(_0x2c261d,_0x58e728){const _0x5a4988=a0_0x544cf1,_0x156acd=a0_0x493ac1;if(!_0x58e728||!_0x58e728[_0x156acd(0xcd)])return;let _0x50af9d=_0x58e728[_0x156acd(0xcd)],_0x4ad488=_0x58e728[_0x156acd(0xc3)](_0x156acd(0xf8));logger[_0x156acd(0x107)]('['+_0x50af9d+_0x156acd(0xec)+_0x4ad488);try{let _0x3a57af=await userDao[_0x156acd(0xda)]({'uid':_0x58e728[_0x156acd(0xcd)],'lastLoginTime':{'$lte':_0x4ad488}},{'frontendId':''});if(!_0x3a57af)logger[_0x5a4988(0x244)](_0x156acd(0xc7)+_0x58e728['uid']);else{if(_0x4ad488<=_0x3a57af[_0x156acd(0xf8)]){if(!!_0x3a57af[_0x156acd(0xd4)]){let _0x4e47b2=dispatch[_0x5a4988(0x20e)](_0x3a57af[_0x5a4988(0x226)],_0x2c261d[_0x5a4988(0x202)](_0x156acd(0x100)));rpcAPI[_0x5a4988(0x243)](_0x156acd(0x109),_0x4e47b2['id'],_0x3a57af[_0x156acd(0xd4)],_0x58e728[_0x156acd(0xcd)],async function(_0x3abdb6){});}}else logger[_0x156acd(0x10a)](_0x5a4988(0x201)+JSON[_0x156acd(0x10e)](_0x4ad488)+_0x5a4988(0x238)+JSON['stringify'](_0x3a57af[_0x156acd(0xf8)]));}}catch(_0x479bf3){logger[_0x156acd(0x10a)](_0x5a4988(0x237)+_0x479bf3);}};