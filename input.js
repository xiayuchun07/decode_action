const a0_0x463764=a0_0x134b;(function(_0x3c487b,_0xf78f6){const _0x49bfea=a0_0x134b,_0x8449a8=_0x3c487b();while(!![]){try{const _0x170ac1=parseInt(_0x49bfea(0x100))/0x1+-parseInt(_0x49bfea(0x108))/0x2+parseInt(_0x49bfea(0x10b))/0x3*(parseInt(_0x49bfea(0xdc))/0x4)+parseInt(_0x49bfea(0xf6))/0x5*(parseInt(_0x49bfea(0xfb))/0x6)+parseInt(_0x49bfea(0xf7))/0x7*(-parseInt(_0x49bfea(0xeb))/0x8)+parseInt(_0x49bfea(0xde))/0x9+parseInt(_0x49bfea(0xe9))/0xa*(-parseInt(_0x49bfea(0xe6))/0xb);if(_0x170ac1===_0xf78f6)break;else _0x8449a8['push'](_0x8449a8['shift']());}catch(_0x30e8eb){_0x8449a8['push'](_0x8449a8['shift']());}}}(a0_0x59c8,0xd1b07));const a0_0x510f9a=a0_0x58d6;(function(_0x8df227,_0x4601e2){const _0x4f178a=a0_0x134b,_0x2ef0d1=a0_0x58d6,_0xf657cf=_0x8df227();while(!![]){try{const _0x43744b=-parseInt(_0x2ef0d1(0xa3))/0x1+-parseInt(_0x2ef0d1(0xa4))/0x2+parseInt(_0x2ef0d1(0x8b))/0x3+-parseInt(_0x2ef0d1(0x9c))/0x4+parseInt(_0x2ef0d1(0x80))/0x5+parseInt(_0x2ef0d1(0x7f))/0x6*(-parseInt(_0x2ef0d1(0x86))/0x7)+parseInt(_0x2ef0d1(0x7c))/0x8*(parseInt(_0x2ef0d1(0x81))/0x9);if(_0x43744b===_0x4601e2)break;else _0xf657cf[_0x4f178a(0xf8)](_0xf657cf[_0x4f178a(0xfd)]());}catch(_0x543ee7){_0xf657cf[_0x4f178a(0xf8)](_0xf657cf['shift']());}}}(a0_0x361b,0x9ec5a));let code=require(a0_0x510f9a(0xaa)),async=require(a0_0x510f9a(0x87)),rpcAPI=require(a0_0x510f9a(0x92)),dispatch=require(a0_0x463764(0x10f)),userInfoServices=require(a0_0x510f9a(0x9f)),pomeloServices=require(a0_0x510f9a(0xa5)),roomServices=require(a0_0x463764(0xe2)),logger=require(a0_0x463764(0x102))[a0_0x510f9a(0xa9)]('logic'),userDao=require(a0_0x510f9a(0xab)),utils=require(a0_0x510f9a(0x8c)),redisService=require(a0_0x510f9a(0x7d)),logServices=require(a0_0x463764(0xf0));function a0_0x134b(_0x4ef973,_0x50108d){const _0x59c8c9=a0_0x59c8();return a0_0x134b=function(_0x134ba8,_0x5c64fa){_0x134ba8=_0x134ba8-0xd9;let _0x83b72c=_0x59c8c9[_0x134ba8];return _0x83b72c;},a0_0x134b(_0x4ef973,_0x50108d);}module[a0_0x510f9a(0x9d)]=function(_0x4fa09a){return new Handler(_0x4fa09a);};function a0_0x58d6(_0x3c1a22,_0x2af4ff){const _0x53f4eb=a0_0x361b();return a0_0x58d6=function(_0x200c3e,_0x156c9f){_0x200c3e=_0x200c3e-0x7b;let _0x63b94d=_0x53f4eb[_0x200c3e];return _0x63b94d;},a0_0x58d6(_0x3c1a22,_0x2af4ff);}let Handler=function(_0x4d2c3d){const _0x1b8b89=a0_0x510f9a;this[_0x1b8b89(0x7e)]=_0x4d2c3d;};Handler['prototype'][a0_0x510f9a(0xa8)]=async function(_0x220c09,_0x537a52,_0x4ac612){const _0x5003c6=a0_0x463764,_0x483d8b=a0_0x510f9a;try{logger=logServices[_0x483d8b(0x98)](_0x220c09[_0x5003c6(0x109)]),logger[_0x483d8b(0x99)]('['+_0x537a52[_0x483d8b(0x96)]+_0x483d8b(0x91)+_0x220c09[_0x483d8b(0x85)]);let _0x129f0f=parseInt(_0x220c09[_0x483d8b(0x85)]);if(!_0x129f0f){_0x4ac612(null,{'code':code[_0x483d8b(0x8d)]});return;}if(!_0x537a52[_0x483d8b(0x96)]){_0x4ac612(null,{'code':code[_0x483d8b(0x89)]});return;}let _0x466361=_0x129f0f+'-Join-New-Room',_0x5695c4=redisService['isLocked'](_0x466361,0x5);if(_0x5695c4){logger['error']('['+_0x537a52[_0x483d8b(0x96)]+_0x483d8b(0x84)),_0x4ac612(null,{'code':code[_0x483d8b(0x93)]});return;}let _0x2fcae1=await userDao[_0x483d8b(0xa6)](_0x537a52[_0x483d8b(0x96)]);if(!_0x2fcae1){_0x4ac612(null,{'code':code[_0x5003c6(0x103)]}),redisService[_0x5003c6(0xdf)](_0x466361);return;}let _0x223927=_0x537a52[_0x5003c6(0x105)](_0x483d8b(0x85));if(!!_0x223927&&_0x129f0f!==_0x223927){logger[_0x483d8b(0x99)]('['+_0x537a52[_0x483d8b(0x96)]+_0x483d8b(0xa1)+_0x223927);let _0x45f522=dispatch[_0x483d8b(0xa0)](_0x223927,this[_0x483d8b(0x7e)][_0x5003c6(0xdd)](_0x5003c6(0xfe))),_0x151072=await rpcAPI[_0x5003c6(0xe4)](_0x45f522['id'],_0x537a52[_0x5003c6(0xe1)],_0x223927);!!_0x151072&&(_0x129f0f=_0x223927);}let _0x59e672=dispatch[_0x483d8b(0xa0)](_0x129f0f,this[_0x483d8b(0x7e)][_0x483d8b(0x90)](_0x483d8b(0xa2))),_0x45f70d=await rpcAPI[_0x483d8b(0xa8)](_0x59e672['id'],userInfoServices[_0x483d8b(0x82)](_0x2fcae1),_0x129f0f);redisService[_0x483d8b(0x9a)](_0x466361),logger[_0x483d8b(0x99)]('['+_0x537a52[_0x483d8b(0x96)]+_0x483d8b(0x9e)+_0x537a52[_0x483d8b(0x96)]+_0x483d8b(0x95)+(_0x45f70d==0x0?_0x483d8b(0x8a):_0x45f70d)+'\x20'),_0x4ac612(null,{'code':_0x45f70d});}catch(_0x3d2861){logger[_0x5003c6(0xec)]('[joinRoom]'+e['stack']),redisService[_0x483d8b(0x9a)](lockKey),_0x4ac612(null,{'code':typeof _0x3d2861===_0x483d8b(0x8e)?_0x3d2861:0x1f4});}},Handler['prototype']['createRoom']=async function(_0x60d05e,_0x313179,_0x312b02){const _0xbb4b40=a0_0x463764,_0x45ec72=a0_0x510f9a;try{logger[_0x45ec72(0x88)](_0xbb4b40(0x10a),_0xbb4b40(0xfc));if(!_0x313179[_0x45ec72(0x96)]){_0x312b02(null,{'code':code[_0xbb4b40(0x103)]});return;}let _0x2343e4=_0x60d05e[_0x45ec72(0x9b)],_0x275419=await userDao[_0x45ec72(0xa6)](_0x313179[_0x45ec72(0x96)]);if(!_0x275419){_0x312b02(null,{'code':code[_0x45ec72(0x89)]});return;}let _0x3266ee=this[_0x45ec72(0x7e)][_0xbb4b40(0xdd)](_0xbb4b40(0xfe)),_0xf587fb=_0x313179[_0x45ec72(0x94)](_0x45ec72(0x85));if(!!_0xf587fb){let _0x11d476=dispatch[_0x45ec72(0xa0)](_0xf587fb,_0x3266ee),_0x1cee4e=await rpcAPI[_0x45ec72(0x97)](_0x11d476['id'],_0x313179[_0x45ec72(0x96)],_0xf587fb);if(!!_0x1cee4e){_0x312b02(null,{'code':code[_0x45ec72(0x7b)]});return;}}let _0x3ef875=dispatch[_0xbb4b40(0xdb)](utils['getRandomNum'](0x0,_0x3266ee[_0x45ec72(0xac)]-0x1),_0x3266ee);await rpcAPI[_0x45ec72(0xa7)](_0x3ef875['id'],userInfoServices[_0x45ec72(0x82)](_0x275419),_0x2343e4,_0x60d05e[_0xbb4b40(0x109)]),_0x312b02(null,{'code':code['OK']});}catch(_0x581014){logger[_0x45ec72(0x8f)]('[createRoom]'+_0x581014[_0x45ec72(0x83)]),_0x312b02(null,{'code':0x1f4});}};function a0_0x59c8(){const _0x215ed2=['shift','game','../../../API/rpcAPI','1469996fXwYDo','ROOM_JOIN_BUSY_LIMIT','pomelo-logger','INVALID_UERS','\x20resCode\x20=\x20','get','1880182qewaiI','number','2298800YlWQPP','gameType','gameHandler','255ekiCyW','roomID','../../../services/pomeloServices','../../../util/utils','../../../util/dispatcher','../../../constant/code','../../../dao/userDao','dispatch','51244cIkAPM','getServersByType','5215203tsfslq','unLock',']\x20joining\x20...','uid','../../../services/roomServices','4850010PRpmKY','isUserInRoom','11752SErbvo','1477751Qzvqgt','REQUEST_DATA_ERROR','debug','130jkwKVV','length','248736ekewUD','error','getUserDataByUid','info','8406pAHnfH','../../../services/logServices','app','getLogger',']\x20join\x20room\x20end\x20\x20result\x20uid\x20=\x20','buildGameRoomUserInfo','joinRoom','64010AybjXU','14MeXJFE','push','../../../services/redisService','FAIL','318GsGHxz','createRoom'];a0_0x59c8=function(){return _0x215ed2;};return a0_0x59c8();}function a0_0x361b(){const _0x27442e=a0_0x463764,_0x26ba17=['288607JncndX',_0x27442e(0x106),_0x27442e(0x10d),_0x27442e(0xed),'createRoom',_0x27442e(0xf5),_0x27442e(0xf2),_0x27442e(0xd9),_0x27442e(0xda),_0x27442e(0xea),_0x27442e(0xfa),_0x27442e(0xe5),_0x27442e(0xf9),_0x27442e(0xf1),'1564314EHbUCz',_0x27442e(0xe3),_0x27442e(0xef),_0x27442e(0xf4),'stack',_0x27442e(0xe0),_0x27442e(0x10c),'14sDPVOW','async',_0x27442e(0xe8),_0x27442e(0x103),'success','1969296iEmtak',_0x27442e(0x10e),_0x27442e(0xe7),_0x27442e(0x107),'error','getServersByType',']\x20join\x20room\x20roomID\x20=\x20',_0x27442e(0xff),_0x27442e(0x101),_0x27442e(0x105),_0x27442e(0x104),_0x27442e(0xe1),_0x27442e(0xe4),'getLogByType',_0x27442e(0xee),_0x27442e(0xdf),'gameRule','2392056uGyuCq','exports',_0x27442e(0xf3),'../../../services/userInfoServices',_0x27442e(0xdb),']\x20in\x20\x20oldRoomID\x20=\x20',_0x27442e(0xfe)];return a0_0x361b=function(){return _0x26ba17;},a0_0x361b();}